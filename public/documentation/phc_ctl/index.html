<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=content-security-policy content="default-src 'self'; connect-src 'self' https://linuxptp.nwtime.org https://www.clarity.ms https://j.clarity.ms https://www.google-analytics.com; child-src 'self'; font-src 'self' https://fonts.gstatic.com; form-action 'self'; frame-src 'self'; img-src 'self' 'unsafe-inline' 'unsafe-eval' https://linuxptp.nwtime.org https://www.google-analytics.com https://www.googletagmanager.com https://www.google.com https://clients1.google.com https://www.googleapis.com https://cse.google.com https://encrypted-tbn0.gstatic.com https://encrypted-tbn3.gstatic.com https://c.clarity.ms https://c.bing.com; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cse.google.com https://www.google.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.google-analytics.com https://www.googletagmanager.com https://cse.google.com https://www.google.com https://www.clarity.ms;"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=canonical href=https://linuxptp.nwtime.org/documentation/phc_ctl/><meta property="og:title" content="phc_ctl(8): directly control PHC device clock"><meta property="og:description" content="Linux PTP man page for directly controlling a master PTP hardware clock."><meta property="og:type" content="article"><meta property="og:url" content="https://linuxptp.nwtime.org/documentation/phc_ctl/"><meta property="og:image" content="https://linuxptp.nwtime.org/images/featured.webp"><meta property="article:section" content="documentation"><meta property="article:published_time" content="2020-06-15T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-15T00:00:00+00:00"><meta property="og:site_name" content="Linux PTP Project"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://linuxptp.nwtime.org/images/featured.webp"><meta name=twitter:title content="phc_ctl(8): directly control PHC device clock"><meta name=twitter:description content="Linux PTP man page for directly controlling a master PTP hardware clock."><script>window.onload=demo;function demo(){document.getElementById("gsc-i-id1").setAttribute("placeholder","Search...")}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-3L2S4S3B0T"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-3L2S4S3B0T',{anonymize_ip:!0})</script><script type=text/javascript>(function(a,e,b,f,g,c,d){a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},c=e.createElement(f),c.async=1,c.src="https://www.clarity.ms/tag/"+g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d)})(window,document,"clarity","script","coqaee2wun")</script><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com/ crossorigin><link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700,800,800i,900i&display=swap" rel=stylesheet><title>phc_ctl(8): directly control PHC device clock</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Linux PTP man page for directly controlling a master PTP hardware clock."><meta name=generator content="Hugo 0.83.1"><link rel=stylesheet href=/scss/nwtime.min.4076252e84f6b88920097824ca49d445.css media=screen></head><body><nav class="navbar navbar-expand-lg navbar-light"><div class=container-fluid><div><a class=navbar-brand href=https://www.nwtime.org><img height=80 width=80 src=https://linuxptp.nwtime.org/images/logo.png alt></a>
<a class=navbar-brand style=color:#1a79c0!important;font-size:18px;font-weight:700;margin-left:20px href=https://linuxptp.nwtime.org/>LinuxPTP Project</a></div><div><button class="btn btn-light btn-lg" type=button aria-expanded=false><a class=nav-item style=text-decoration:none;text-transform:uppercase href=https://linuxptp.nwtime.org/about/>About</a></button>
<button class="btn btn-light btn-lg" type=button aria-expanded=false><a class=nav-item style=text-decoration:none;text-transform:uppercase href=https://linuxptp.nwtime.org/install/>Install</a></button>
<button class="btn btn-light btn-lg" type=button aria-expanded=false><a class=nav-item style=text-decoration:none;text-transform:uppercase href=https://linuxptp.nwtime.org/getting-involved/>Getting Involved</a></button>
<button class="btn btn-light btn-lg" type=button aria-expanded=false><a class=nav-item style=text-decoration:none;text-transform:uppercase href=https://linuxptp.nwtime.org/documentation/>Documentation</a></button></div><script async src="https://cse.google.com/cse.js?cx=7474c4c5ca53f79ef"></script><div class=gcse-search></ul></div></nav><div class=header-border></div><section class="section pt-0 pb-auto"><div class=container><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://linuxptp.nwtime.org/documentation/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://linuxptp.nwtime.org/documentation/phc_ctl/>phc_ctl(8): directly control PHC device clock</a></li></ol></nav><h3 id=phc_ctl8-directly-control-phc-device-clock>phc_ctl(8): directly control PHC device clock</h3><h4 id=synopsis>SYNOPSIS</h4><p><code>phc_ctl [ options ] &lt;device> [ commands ]</code></p><h4 id=description>DESCRIPTION</h4><p><code>phc_ctl</code> is a program which can be used to directly control a PHC clock device. Typically, it is used for debugging purposes, and has little use for general control of the device. For general control of PHC clock devices, <a href=/documentation/phc2sys/>phc2sys(8)</a> should be preferred.</p><p><code>&lt;device></code> may be either <code>CLOCK_REALTIME</code>, any <code>/dev/ptpX</code> device, or any ethernet device which supports <code>ethtool</code>&rsquo;s <code>get_ts_info</code> ioctl.</p><h4 id=options>OPTIONS</h4><dl><dt><code><strong>-l <em>print-level</em></strong></code></dt><dd><p>Set the maximum <code>syslog</code> level of messages which should be printed or sent to the system logger. The default is 6 (<code>LOG_INFO</code>).</p></dd><dt><code><strong>-q</strong></code></dt><dd><p>Do not send messages to <code>syslog</code>. By default messages will be sent.</p></dd><dt><code><strong>-Q</strong></code></dt><dd><p>Do not print messages to standard output. By default messages will be printed.</p></dd><dt><code><strong>-h</strong></code></dt><dd><p>Display a help message.</p></dd><dt><code><strong>-v</strong></code></dt><dd><p>Prints the software version and exits.</p></dd></dl><h4 id=commands>COMMANDS</h4><p><code>phc_ctl</code> is controlled by passing commands which take either an optional or required parameter. The commands (outlined below) will control aspects of the PHC clock device. These commands may be useful for inspecting or debugging the PHC driver, but may have adverse side effects on running instances of <a href=/documentation/ptp4l/>ptp4l(8)</a> or <a href=/documentation/phc2sys/>phc2sys(8)</a>.</p><dl><dt><code><strong>set <em>seconds</em></strong></code></dt><dd><p>Set the PHC clock time to the value specified in seconds. Defaults to reading <code>CLOCK_REALTIME</code> if no value is provided.</p></dd><dt><code><strong>get</strong></code></dt><dd><p>Get the current time of the PHC clock device.</p></dd><dt><code><strong>adj <em>seconds</em></strong></code></dt><dd><p>Adjust the PHC clock by an amount of seconds provided. This argument is required.</p></dd><dt><code><strong>freq <em>ppb</em></strong></code></dt><dd><p>Adjust the frequency of the PHC clock by the specified parts per billion. If no argument is provided, it will attempt to read the current frequency and report it.</p></dd><dt><code><strong>cmp</strong></code></dt><dd><p>Compare the PHC clock device to <code>CLOCK_REALTIME</code>, using the best method available.</p></dd><dt><code><strong>caps</strong></code></dt><dd><p>Display the device capabilities. This is the default command if no commands are provided.</p></dd><dt><code><strong>wait <em>seconds</em></strong></code></dt><dd><p>Sleep the process for the specified period of time, waking up and resuming afterwards. This command may be useful for sanity checking whether the PHC clock is running as expected.</p></dd></dl><p>The arguments specified in seconds are read as double precision floating point values, and will scale to nanoseconds. This means providing a value of 5.5 means 5 and one half seconds. This allows specifying fairly precise values for time.</p><h4 id=examples>EXAMPLES</h4><p>Read the current clock time from the device</p><p><code>phc_ctl /dev/ptp0 get</code></p><p>Set the PHC clock time to <code>CLOCK_REALTIME</code>.</p><p><code>phc_ctl /dev/ptp0 set</code></p><p>Set PHC clock time to 0 (seconds since Epoch).</p><p><code>phc_ctl /dev/ptp0 set 0.0</code></p><p>Quickly sanity check frequency slewing by setting slewing frequency by positive 10%, resetting clock to 0.0 time, waiting for 10 seconds, and then reading time. The time read back should be (roughly) 11 seconds, since the clock was slewed 10% faster.</p><p><code>phc_ctl /dev/ptp0 freq 100000000 set 0.0 wait 10.0 get</code></p><h4 id=see-also>SEE ALSO</h4><p><a href=/documentation/ptp4l/>ptp4l(8)</a>, <a href=/documentation/phc2sys/>phc2sys(8)</a></p></div></section><nav class="site-footer navbar navbar-expand-sm mt-auto"><div class=container><ul class=navbar-nav><li class=nav-item title="Mailing lists" aria-label="Mailing lists"><a class=nav-link target=_blank rel="noopener noreferrer" href=https://sourceforge.net/projects/linuxptp/lists/linuxptp-users><img src=/images/icons/envelope.svg width=20 height=20></img></a></li><li class=nav-item title=LinkedIn aria-label=LinkedIn><a class=nav-link target=_blank rel="noopener noreferrer" href=https://www.linkedin.com/groups/4683708/><img src=/images/icons/linkedin.svg width=20 height=20></img></a></li></ul><ul class="mx-auto pt-3"><p>&copy; 2023 <a class="navbar-text text-white" href=https://www.nwtime.org>Network Time Foundation</a></p></ul></div></nav></body></html>